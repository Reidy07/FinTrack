@page
@model LoginModel
@{
    ViewData["Title"] = "Iniciar sesión";
}

<div class="w-full max-w-md">
    <div class="rounded-3xl border border-white/10 bg-white/[0.06] backdrop-blur-xl shadow-2xl p-6 md:p-8">
        <div class="text-center">
            <img src="~/images/fintrack-logo.jpg" asp-append-version="true"
                 class="mx-auto ft-auth-logo"
                 alt="FinTrack" />

            <div class="mt-4">
                <div class="text-xl font-semibold tracking-tight">FinTrack</div>
                <div class="mt-1 text-sm text-white/55">Accede a tu panel financiero</div>
            </div>
        </div>


        <div class="mt-6">
            <h1 class="text-2xl font-semibold">Bienvenido</h1>
            <p class="mt-1 text-sm text-white/55">Inicia sesión para continuar.</p>
        </div>

        <div class="mt-6">
            <form id="account" method="post" class="space-y-4">
                <div asp-validation-summary="ModelOnly" class="text-sm text-red-200"></div>

                <div>
                    <label asp-for="Input.Email" class="block text-sm text-white/60 mb-2">Email</label>
                    <input asp-for="Input.Email" class="ft-input w-full" autocomplete="username" />
                    <span asp-validation-for="Input.Email" class="text-xs text-red-200"></span>
                </div>

                <div>
                    <label asp-for="Input.Password" class="block text-sm text-white/60 mb-2">Contraseña</label>
                    <div class="relative">
                        <input asp-for="Input.Password" class="ft-input w-full pr-12" autocomplete="current-password" />
                        <button type="button" id="togglePwd"
                                class="absolute right-2 top-1/2 -translate-y-1/2 px-3 py-2 rounded-xl text-white/60 hover:text-white hover:bg-white/5">
                            <i class="bi bi-eye"></i>
                        </button>
                    </div>
                    <span asp-validation-for="Input.Password" class="text-xs text-red-200"></span>
                </div>

                <div class="flex items-center justify-between">
                    <label class="inline-flex items-center gap-2 text-sm text-white/70">
                        <input asp-for="Input.RememberMe" class="accent-emerald-400" />
                        Recordarme
                    </label>

                    <a asp-page="./ForgotPassword" class="text-sm text-emerald-200 hover:text-emerald-100">
                        ¿Olvidaste tu contraseña?
                    </a>
                </div>

                <button type="submit" class="ft-btn-primary w-full justify-center py-3">
                    Iniciar sesión
                </button>

                <div class="pt-3 text-center text-sm text-white/60">
                    ¿No tienes cuenta?
                    <a asp-page="./Register" asp-route-returnUrl="@Model.ReturnUrl"
                       class="text-emerald-200 hover:text-emerald-100 font-medium">
                        Crear cuenta
                    </a>
                </div>
            </form>
        </div>
    </div>

    <div class="mt-6 text-center text-xs text-white/45">
        © @DateTime.Now.Year FinTrack — Controla tu dinero con claridad.
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        (function () {
            const btn = document.getElementById('togglePwd');
            const input = document.getElementById('Input_Password');
            if (!btn || !input) return;

            btn.addEventListener('click', () => {
                const isPwd = input.getAttribute('type') === 'password';
                input.setAttribute('type', isPwd ? 'text' : 'password');
                btn.innerHTML = isPwd ? '<i class="bi bi-eye-slash"></i>' : '<i class="bi bi-eye"></i>';
            });
        })();
    </script>
}
