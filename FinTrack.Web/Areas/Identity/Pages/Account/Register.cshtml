@page
@model RegisterModel
@{
    ViewData["Title"] = "Crear cuenta";
}

<div class="w-full max-w-md">
    <div class="rounded-3xl border border-white/10 bg-white/[0.06] backdrop-blur-xl shadow-2xl p-6 md:p-8">
        <div class="text-center">
            <img src="~/images/fintrack-logo.jpg" asp-append-version="true"
                 class="mx-auto ft-auth-logo"
                 alt="FinTrack" />
            <div>
                <div class="text-xl font-semibold tracking-tight">FinTrack</div>
                <div class="text-sm text-white/55">Crea tu cuenta en segundos</div>
            </div>
        </div>

        <div class="mt-6">
            <h1 class="text-2xl font-semibold">Crear cuenta</h1>
            <p class="mt-1 text-sm text-white/55">Regístrate para empezar a controlar tus finanzas.</p>
        </div>

        <div class="mt-6">
            <form id="registerForm" asp-route-returnUrl="@Model.ReturnUrl" method="post" class="space-y-4">
                <div asp-validation-summary="ModelOnly" class="text-sm text-red-200"></div>

                <div>
                    <label asp-for="Input.Email" class="block text-sm text-white/60 mb-2">Email</label>
                    <input asp-for="Input.Email" class="ft-input w-full" autocomplete="username" />
                    <span asp-validation-for="Input.Email" class="text-xs text-red-200"></span>
                </div>

                @* Si tu modelo tiene Username, puedes habilitar esto:
                <div>
                    <label asp-for="Input.Username" class="block text-sm text-white/60 mb-2">Usuario</label>
                    <input asp-for="Input.Username" class="ft-input w-full" autocomplete="username" />
                    <span asp-validation-for="Input.Username" class="text-xs text-red-200"></span>
                </div>
                *@

                <div>
                    <label asp-for="Input.Password" class="block text-sm text-white/60 mb-2">Contraseña</label>
                    <div class="relative">
                        <input asp-for="Input.Password" class="ft-input w-full pr-12" autocomplete="new-password" />
                        <button type="button" id="togglePwd"
                                class="absolute right-2 top-1/2 -translate-y-1/2 px-3 py-2 rounded-xl text-white/60 hover:text-white hover:bg-white/5">
                            <i class="bi bi-eye"></i>
                        </button>
                    </div>
                    <span asp-validation-for="Input.Password" class="text-xs text-red-200"></span>
                </div>

                <div>
                    <label asp-for="Input.ConfirmPassword" class="block text-sm text-white/60 mb-2">Confirmar contraseña</label>
                    <div class="relative">
                        <input asp-for="Input.ConfirmPassword" class="ft-input w-full pr-12" autocomplete="new-password" />
                        <button type="button" id="toggleConfirmPwd"
                                class="absolute right-2 top-1/2 -translate-y-1/2 px-3 py-2 rounded-xl text-white/60 hover:text-white hover:bg-white/5">
                            <i class="bi bi-eye"></i>
                        </button>
                    </div>
                    <span asp-validation-for="Input.ConfirmPassword" class="text-xs text-red-200"></span>
                </div>

                <button type="submit" class="ft-btn-primary w-full justify-center py-3">
                    Crear cuenta
                </button>

                <div class="pt-3 text-center text-sm text-white/60">
                    ¿Ya tienes cuenta?
                    <a asp-page="./Login" asp-route-returnUrl="@Model.ReturnUrl"
                       class="text-emerald-200 hover:text-emerald-100 font-medium">
                        Iniciar sesión
                    </a>
                </div>
            </form>
        </div>
    </div>

    <div class="mt-6 text-center text-xs text-white/45">
        Al registrarte, aceptas las políticas de uso de FinTrack.
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        (function () {
            const toggle = (btnId, inputId) => {
                const btn = document.getElementById(btnId);
                const input = document.getElementById(inputId);
                if (!btn || !input) return;

                btn.addEventListener('click', () => {
                    const isPwd = input.getAttribute('type') === 'password';
                    input.setAttribute('type', isPwd ? 'text' : 'password');
                    btn.innerHTML = isPwd ? '<i class="bi bi-eye-slash"></i>' : '<i class="bi bi-eye"></i>';
                });
            };

            toggle('togglePwd', 'Input_Password');
            toggle('toggleConfirmPwd', 'Input_ConfirmPassword');
        })();
    </script>
}
